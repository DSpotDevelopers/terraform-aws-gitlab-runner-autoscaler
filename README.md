# Terraform Module: GitLab Runner Autoscaler on AWS Spot Instances

This Terraform module provides a reusable infrastructure configuration for deploying GitLab Runner instances on AWS Spot Instances. Using the AWS Fleeting plugin, the Runner instances can be automatically scaled based on the number of jobs in the GitLab CI/CD pipeline. The module supports both ARM64 and AMD64 architectures.

## Architecture

This module use a single GitLab Runner Manager instance to manage multiple GitLab Runner instances. The Runner Manager is responsible for scheduling jobs on the Runner instances and scaling the number of instances based on the number of jobs in the GitLab CI/CD pipeline.

The Runner Manager is deployed as an EC2 instance and the Runner instances are deployed as AWS Spot Instances. The Runner instances are managed by an Auto Scaling Group and are launched using a Launch Template.

[![Architecture Diagram](https://raw.githubusercontent.com/nesty92/terraform-aws-gitlab-runner-autoscaler/main/docs/architecture.png)](https://raw.githubusercontent.com/nesty92/terraform-aws-gitlab-runner-autoscaler/main/docs/architecture.png)
*Architecture Diagram - See: [GitLab Runner Autoscaler documentation](https://docs.gitlab.com/runner/runner_autoscale/#gitlab-runner-autoscaler) for more details*


## License

This module is licensed under the Apache License. See the [LICENSE](./LICENSE) file for more details.
<!-- BEGIN_TF_DOCS -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.3 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | >= 5.11 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_aws"></a> [aws](#provider\_aws) | >= 5.11 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [aws_autoscaling_group.gitlab_runner_instance](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/autoscaling_group) | resource |
| [aws_iam_instance_profile.runner_manager](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_instance_profile) | resource |
| [aws_iam_role.runner_manager](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role) | resource |
| [aws_instance.runner_manager](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/instance) | resource |
| [aws_launch_template.gitlab_runner_instance](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/launch_template) | resource |
| [aws_security_group.runner](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group) | resource |
| [aws_security_group.runner_manager](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group) | resource |
| [aws_ami.amazon_linux_2](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/ami) | data source |
| [aws_caller_identity.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/caller_identity) | data source |
| [aws_region.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/region) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_architectures"></a> [architectures](#input\_architectures) | The architectures that the Runner will support (e.g., arm64, amd64) | `list(string)` | n/a | yes |
| <a name="input_aws_azs"></a> [aws\_azs](#input\_aws\_azs) | n/a | `list(string)` | `[]` | no |
| <a name="input_aws_key_name"></a> [aws\_key\_name](#input\_aws\_key\_name) | n/a | `string` | `""` | no |
| <a name="input_aws_security_group_ids"></a> [aws\_security\_group\_ids](#input\_aws\_security\_group\_ids) | n/a | `list(string)` | `[]` | no |
| <a name="input_aws_subnet_ids"></a> [aws\_subnet\_ids](#input\_aws\_subnet\_ids) | n/a | `list(string)` | n/a | yes |
| <a name="input_aws_vpc_id"></a> [aws\_vpc\_id](#input\_aws\_vpc\_id) | n/a | `string` | n/a | yes |
| <a name="input_environment"></a> [environment](#input\_environment) | A name that identifies the environment, used as a prefix for tagging resources | `string` | n/a | yes |
| <a name="input_fleeting_plugin_aws_version"></a> [fleeting\_plugin\_aws\_version](#input\_fleeting\_plugin\_aws\_version) | The version of the AWS Fleeting plugin to install. | `string` | n/a | yes |
| <a name="input_gitlab_instance_url"></a> [gitlab\_instance\_url](#input\_gitlab\_instance\_url) | The URL of the GitLab instance | `string` | `"https://gitlab.com"` | no |
| <a name="input_gitlab_runner_version"></a> [gitlab\_runner\_version](#input\_gitlab\_runner\_version) | The version of the GitLab Runner to install. | `string` | n/a | yes |
| <a name="input_runner_autoscaler_options_amd64"></a> [runner\_autoscaler\_options\_amd64](#input\_runner\_autoscaler\_options\_amd64) | Options added to the [runners.autoscaler] section of config.toml to configure the Runner Autoscaler. For<br>    details check https://docs.gitlab.com/runner/configuration/advanced-configuration.html#the-runnersautoscaler-section<br><br>    capacity\_per\_instance = The number of jobs that can be executed concurrently by a single instance.<br>    max\_use\_count = The maximum number of times an instance can be used before it is scheduled for removal.<br>    max\_instances = The maximum number of instances that are allowed, this is regardless of the instance state (pending, running, deleting). Default: 0 (unlimited).<br><br>    The fleeting-plugin-aws is the only supported plugin.<br><br>    Default values if the option is not given:<br>      capacity\_per\_instance = 1<br>      max\_use\_count = 10<br>      max\_instances = 2 | <pre>object({<br>    capacity_per_instance = optional(number)<br>    max_use_count         = optional(number)<br>    max_instances         = optional(number)<br>  })</pre> | <pre>{<br>  "capacity_per_instance": 1,<br>  "max_instances": 2,<br>  "max_use_count": 10<br>}</pre> | no |
| <a name="input_runner_autoscaler_options_arm64"></a> [runner\_autoscaler\_options\_arm64](#input\_runner\_autoscaler\_options\_arm64) | Options added to the [runners.autoscaler] section of config.toml to configure the Runner Autoscaler. For<br>    details check https://docs.gitlab.com/runner/configuration/advanced-configuration.html#the-runnersautoscaler-section<br><br>    capacity\_per\_instance = The number of jobs that can be executed concurrently by a single instance.<br>    max\_use\_count = The maximum number of times an instance can be used before it is scheduled for removal.<br>    max\_instances = The maximum number of instances that are allowed, this is regardless of the instance state (pending, running, deleting). Default: 0 (unlimited).<br><br>    The fleeting-plugin-aws is the only supported plugin.<br><br>    Default values if the option is not given:<br>      capacity\_per\_instance = 1<br>      max\_use\_count = 10<br>      max\_instances = 2 | <pre>object({<br>    capacity_per_instance = optional(number)<br>    max_use_count         = optional(number)<br>    max_instances         = optional(number)<br>  })</pre> | <pre>{<br>  "capacity_per_instance": 1,<br>  "max_instances": 2,<br>  "max_use_count": 10<br>}</pre> | no |
| <a name="input_runner_autoscaler_plugin_connector_options_amd64"></a> [runner\_autoscaler\_plugin\_connector\_options\_amd64](#input\_runner\_autoscaler\_plugin\_connector\_options\_amd64) | Options added to the [runners.autoscaler.connector\_config] section of config.toml to configure the Runner Plugin Connector. For<br>    details check https://gitlab.com/gitlab-org/fleeting/plugins/aws | <pre>object({<br>    os                     = optional(string, "linux")<br>    arch                   = optional(string)<br>    protocol               = optional(string)<br>    username               = optional(string)<br>    password               = optional(string)<br>    key_path               = optional(string)<br>    use_static_credentials = optional(bool, false)<br>    keepalive              = optional(string)<br>    timeout                = optional(string)<br>    use_external_addr      = optional(bool, false)<br>  })</pre> | <pre>{<br>  "arch": "amd64"<br>}</pre> | no |
| <a name="input_runner_autoscaler_plugin_connector_options_arm64"></a> [runner\_autoscaler\_plugin\_connector\_options\_arm64](#input\_runner\_autoscaler\_plugin\_connector\_options\_arm64) | Options added to the [runners.autoscaler.connector\_config] section of config.toml to configure the Runner Plugin Connector. For<br>    details check https://gitlab.com/gitlab-org/fleeting/plugins/aws | <pre>object({<br>    os                     = optional(string, "linux")<br>    arch                   = optional(string)<br>    protocol               = optional(string)<br>    username               = optional(string)<br>    password               = optional(string)<br>    key_path               = optional(string)<br>    use_static_credentials = optional(bool, false)<br>    keepalive              = optional(string)<br>    timeout                = optional(string)<br>    use_external_addr      = optional(bool, false)<br>  })</pre> | <pre>{<br>  "arch": "arm64"<br>}</pre> | no |
| <a name="input_runner_autoscaler_plugin_options_amd64"></a> [runner\_autoscaler\_plugin\_options\_amd64](#input\_runner\_autoscaler\_plugin\_options\_amd64) | Options added to the [runners.autoscaler.plugin\_config] section of config.toml to configure the Runner Plugin. For<br>    details check https://gitlab.com/gitlab-org/fleeting/plugins/aws<br><br>    auto\_scaling\_group\_name Will be set to the value of the corresponding Arch | <pre>object({<br>    profile_name     = optional(string)<br>    config_file      = optional(string)<br>    credentials_file = optional(string)<br>  })</pre> | `{}` | no |
| <a name="input_runner_autoscaler_plugin_options_arm64"></a> [runner\_autoscaler\_plugin\_options\_arm64](#input\_runner\_autoscaler\_plugin\_options\_arm64) | Options added to the [runners.autoscaler.plugin\_config] section of config.toml to configure the Runner Plugin. For<br>    details check https://gitlab.com/gitlab-org/fleeting/plugins/aws<br><br>    auto\_scaling\_group\_name Will be set to the value of the corresponding Arch | <pre>object({<br>    profile_name     = optional(string)<br>    config_file      = optional(string)<br>    credentials_file = optional(string)<br>  })</pre> | `{}` | no |
| <a name="input_runner_autoscaler_policy_amd64"></a> [runner\_autoscaler\_policy\_amd64](#input\_runner\_autoscaler\_policy\_amd64) | Options added to the [runners.autoscaler.policy] section of config.toml to configure the Runner Autoscaler Policy. For<br>    details check https://docs.gitlab.com/runner/configuration/advanced-configuration.html#the-runnersautoscalerpolicy-section<br><br>    Default values if the option is not given:<br>      idle\_count = 0<br>      idle\_time = "30m" | <pre>list(object({<br>    periods            = optional(list(string))<br>    timezone           = optional(string)<br>    idle_count         = optional(number)<br>    idle_time          = optional(string)<br>    scale_factor       = optional(number)<br>    scale_factor_limit = optional(number)<br>  }))</pre> | <pre>[<br>  {<br>    "idle_count": 0,<br>    "idle_time": "30m"<br>  }<br>]</pre> | no |
| <a name="input_runner_autoscaler_policy_arm64"></a> [runner\_autoscaler\_policy\_arm64](#input\_runner\_autoscaler\_policy\_arm64) | Options added to the [runners.autoscaler.policy] section of config.toml to configure the Runner Autoscaler Policy. For<br>    details check https://docs.gitlab.com/runner/configuration/advanced-configuration.html#the-runnersautoscalerpolicy-section<br><br>    Default values if the option is not given:<br>      idle\_count = 0<br>      idle\_time = "30m" | <pre>list(object({<br>    periods            = optional(list(string))<br>    timezone           = optional(string)<br>    idle_count         = optional(number)<br>    idle_time          = optional(string)<br>    scale_factor       = optional(number)<br>    scale_factor_limit = optional(number)<br>  }))</pre> | <pre>[<br>  {<br>    "idle_count": 0,<br>    "idle_time": "30m"<br>  }<br>]</pre> | no |
| <a name="input_runner_docker_options_amd64"></a> [runner\_docker\_options\_amd64](#input\_runner\_docker\_options\_amd64) | Options added to the [runners.docker] section of config.toml to configure the Docker container of the Runner Worker. For<br>    details check https://docs.gitlab.com/runner/configuration/advanced-configuration.html<br><br>    Default values if the option is not given:<br>      disable\_cache = "false"<br>      image         = "busybox:latest"<br>      privileged    = "false"<br>      pull\_policy   = "always"<br>      shm\_size      = 0<br>      tls\_verify    = "false"<br>      volumes       = "/cache" | <pre>object({<br>    allowed_images                   = optional(list(string))<br>    allowed_privileged_images        = optional(list(string))<br>    allowed_pull_policies            = optional(list(string))<br>    allowed_services                 = optional(list(string))<br>    allowed_privileged_services      = optional(list(string))<br>    cache_dir                        = optional(string)<br>    cap_add                          = optional(list(string))<br>    cap_drop                         = optional(list(string))<br>    cpuset_cpus                      = optional(string)<br>    cpu_shares                       = optional(number)<br>    cpus                             = optional(string)<br>    devices                          = optional(list(string))<br>    device_cgroup_rules              = optional(list(string))<br>    disable_cache                    = optional(bool, false)<br>    disable_entrypoint_overwrite     = optional(bool)<br>    dns                              = optional(list(string))<br>    dns_search                       = optional(list(string))<br>    extra_hosts                      = optional(list(string))<br>    gpus                             = optional(string)<br>    group_add                        = optional(list(string))<br>    helper_image                     = optional(string)<br>    helper_image_flavor              = optional(string)<br>    helper_image_autoset_arch_and_os = optional(bool)<br>    host                             = optional(string)<br>    hostname                         = optional(string)<br>    image                            = optional(string, "busybox:latest")<br>    links                            = optional(list(string))<br>    memory                           = optional(string)<br>    memory_swap                      = optional(string)<br>    memory_reservation               = optional(string)<br>    network_mode                     = optional(string)<br>    mac_address                      = optional(string)<br>    oom_kill_disable                 = optional(bool)<br>    oom_score_adjust                 = optional(number)<br>    privileged                       = optional(bool, false)<br>    services_privileged              = optional(string)<br>    pull_policy                      = optional(list(string), ["always"])<br>    runtime                          = optional(string)<br>    isolation                        = optional(string)<br>    security_opt                     = optional(list(string))<br>    shm_size                         = optional(number, 0)<br>    sysctls                          = optional(map(string))<br>    tls_cert_path                    = optional(string)<br>    tls_verify                       = optional(bool, false)<br>    user                             = optional(string)<br>    userns_mode                      = optional(string)<br>    ulimit                           = optional(list(string))<br>    volumes                          = optional(list(string), [])<br>    volumes_from                     = optional(list(string))<br>    volume_driver                    = optional(string)<br>    wait_for_services_timeout        = optional(number)<br>    container_labels                 = optional(map(string))<br>    services_limit                   = optional(number)<br>    service_cpuset_cpus              = optional(string)<br>    service_cpu_shares               = optional(number)<br>    service_cpus                     = optional(string)<br>    service_memory                   = optional(string)<br>    service_memory_swap              = optional(string)<br>    service_memory_reservation       = optional(string)<br>  })</pre> | <pre>{<br>  "disable_cache": false,<br>  "image": "busybox:latest",<br>  "privileged": false,<br>  "pull_policies": [<br>    "always"<br>  ],<br>  "shm_size": 0,<br>  "tls_verify": false,<br>  "volumes": [<br>    "/cache"<br>  ]<br>}</pre> | no |
| <a name="input_runner_docker_options_arm64"></a> [runner\_docker\_options\_arm64](#input\_runner\_docker\_options\_arm64) | Options added to the [runners.docker] section of config.toml to configure the Docker container of the Runner Worker. For<br>    details check https://docs.gitlab.com/runner/configuration/advanced-configuration.html<br><br>    Default values if the option is not given:<br>      disable\_cache = false<br>      image         = "busybox:latest"<br>      privileged    = false<br>      pull\_policy   = "always"<br>      shm\_size      = 0<br>      tls\_verify    = false<br>      volumes       = "/cache" | <pre>object({<br>    allowed_images                   = optional(list(string))<br>    allowed_privileged_images        = optional(list(string))<br>    allowed_pull_policies            = optional(list(string))<br>    allowed_services                 = optional(list(string))<br>    allowed_privileged_services      = optional(list(string))<br>    cache_dir                        = optional(string)<br>    cap_add                          = optional(list(string))<br>    cap_drop                         = optional(list(string))<br>    cpuset_cpus                      = optional(string)<br>    cpu_shares                       = optional(number)<br>    cpus                             = optional(string)<br>    devices                          = optional(list(string))<br>    device_cgroup_rules              = optional(list(string))<br>    disable_cache                    = optional(bool, false)<br>    disable_entrypoint_overwrite     = optional(bool)<br>    dns                              = optional(list(string))<br>    dns_search                       = optional(list(string))<br>    extra_hosts                      = optional(list(string))<br>    gpus                             = optional(string)<br>    group_add                        = optional(list(string))<br>    helper_image                     = optional(string)<br>    helper_image_flavor              = optional(string)<br>    helper_image_autoset_arch_and_os = optional(bool)<br>    host                             = optional(string)<br>    hostname                         = optional(string)<br>    image                            = optional(string, "busybox:latest")<br>    links                            = optional(list(string))<br>    memory                           = optional(string)<br>    memory_swap                      = optional(string)<br>    memory_reservation               = optional(string)<br>    network_mode                     = optional(string)<br>    mac_address                      = optional(string)<br>    oom_kill_disable                 = optional(bool)<br>    oom_score_adjust                 = optional(number)<br>    privileged                       = optional(bool, false)<br>    services_privileged              = optional(string)<br>    pull_policy                      = optional(list(string), ["always"])<br>    runtime                          = optional(string)<br>    isolation                        = optional(string)<br>    security_opt                     = optional(list(string))<br>    shm_size                         = optional(number, 0)<br>    sysctls                          = optional(map(string))<br>    tls_cert_path                    = optional(string)<br>    tls_verify                       = optional(bool, false)<br>    user                             = optional(string)<br>    userns_mode                      = optional(string)<br>    ulimit                           = optional(list(string))<br>    volumes                          = optional(list(string), [])<br>    volumes_from                     = optional(list(string))<br>    volume_driver                    = optional(string)<br>    wait_for_services_timeout        = optional(number)<br>    container_labels                 = optional(map(string))<br>    services_limit                   = optional(number)<br>    service_cpuset_cpus              = optional(string)<br>    service_cpu_shares               = optional(number)<br>    service_cpus                     = optional(string)<br>    service_memory                   = optional(string)<br>    service_memory_swap              = optional(string)<br>    service_memory_reservation       = optional(string)<br>  })</pre> | <pre>{<br>  "disable_cache": false,<br>  "image": "busybox:latest",<br>  "privileged": false,<br>  "pull_policies": [<br>    "always"<br>  ],<br>  "shm_size": 0,<br>  "tls_verify": false,<br>  "volumes": [<br>    "/cache"<br>  ]<br>}</pre> | no |
| <a name="input_runner_instance_amd64"></a> [runner\_instance\_amd64](#input\_runner\_instance\_amd64) | ami\_id = The AMI ID to use for the Runner instance.<br>additional\_tags = Map of tags that will be added to the Runner instance.<br>collect\_autoscaling\_metrics = A list of metrics to collect. The allowed values are GroupDesiredCapacity, GroupInServiceCapacity, GroupPendingCapacity, GroupMinSize, GroupMaxSize, GroupInServiceInstances, GroupPendingInstances, GroupStandbyInstances, GroupStandbyCapacity, GroupTerminatingCapacity, GroupTerminatingInstances, GroupTotalCapacity, GroupTotalInstances.<br>ebs\_optimized = Enable EBS optimization for the Runner instance.<br>max\_lifetime\_seconds = The maximum time a Runner should live before it is killed.<br>monitoring = Enable the detailed monitoring on the Runner instance. Default: false<br>name\_prefix = Set the name prefix and override the `Name` tag for the Runner instance.<br>private\_address\_only = Restrict the Runner to use private IP addresses only. If this is set to `true` the Runner will use a private IP address only in case the Runner Workers use private addresses only.<br>block\_device\_mappings = The Runner's root block device configuration. Takes the following keys: `device_name`, `delete_on_termination`, `volume_type`, `volume_size`, `encrypted`, `iops`, `throughput`, `kms_key_id`<br>spot\_price = By setting a spot price bid price the Runner is created via a spot request. Be aware that spot instances can be stopped by AWS. Choose \"on-demand-price\" to pay up to the current on demand price for the instance type chosen.<br>ssm\_access = Allows to connect to the Runner via SSM.<br>type = EC2 instance type used. Default: t3.micro<br>use\_eip = Assigns an EIP to the Runner.<br>iam\_instance\_profile = The IAM instance profile to associate with the Runner instance.<br>security\_group\_ids = The security group IDs to associate with the Runner instance. | <pre>object({<br>    ami_id                      = string<br>    additional_tags             = optional(map(string))<br>    collect_autoscaling_metrics = optional(list(string), null)<br>    ebs_optimized               = optional(bool, true)<br>    max_lifetime_seconds        = optional(number, null)<br>    monitoring                  = optional(bool, false)<br>    name_prefix                 = optional(string)<br>    private_address_only        = optional(bool, true)<br>    block_device_mappings       = optional(map(string), {})<br>    spot_price                  = optional(string, null)<br>    ssm_access                  = optional(bool, false)<br>    type                        = optional(string, "t3.micro")<br>    use_eip                     = optional(bool, false)<br>    iam_instance_profile        = optional(string)<br>    security_group_ids          = optional(list(string), [])<br>  })</pre> | n/a | yes |
| <a name="input_runner_instance_arm64"></a> [runner\_instance\_arm64](#input\_runner\_instance\_arm64) | ami\_id = The AMI ID to use for the Runner instance.<br>additional\_tags = Map of tags that will be added to the Runner instance.<br>collect\_autoscaling\_metrics = A list of metrics to collect. The allowed values are GroupDesiredCapacity, GroupInServiceCapacity, GroupPendingCapacity, GroupMinSize, GroupMaxSize, GroupInServiceInstances, GroupPendingInstances, GroupStandbyInstances, GroupStandbyCapacity, GroupTerminatingCapacity, GroupTerminatingInstances, GroupTotalCapacity, GroupTotalInstances.<br>ebs\_optimized = Enable EBS optimization for the Runner instance.<br>max\_lifetime\_seconds = The maximum time a Runner should live before it is killed.<br>monitoring = Enable the detailed monitoring on the Runner instance. Default: false<br>name\_prefix = Set the name prefix and override the `Name` tag for the Runner instance.<br>private\_address\_only = Restrict the Runner to use private IP addresses only. If this is set to `true` the Runner will use a private IP address only in case the Runner Workers use private addresses only.<br>block\_device\_mappings = The Runner's root block device configuration. Takes the following keys: `device_name`, `delete_on_termination`, `volume_type`, `volume_size`, `encrypted`, `iops`, `throughput`, `kms_key_id`<br>spot\_price = By setting a spot price bid price the Runner is created via a spot request. Be aware that spot instances can be stopped by AWS. Choose \"on-demand-price\" to pay up to the current on demand price for the instance type chosen.<br>ssm\_access = Allows to connect to the Runner via SSM.<br>type = EC2 instance type used. Default: t4g.micro<br>use\_eip = Assigns an EIP to the Runner.<br>iam\_instance\_profile = The IAM instance profile to associate with the Runner instance.<br>security\_group\_ids = The security group IDs to associate with the Runner instance. | <pre>object({<br>    ami_id                      = string<br>    additional_tags             = optional(map(string))<br>    collect_autoscaling_metrics = optional(list(string), null)<br>    ebs_optimized               = optional(bool, true)<br>    max_lifetime_seconds        = optional(number, null)<br>    monitoring                  = optional(bool, false)<br>    name_prefix                 = optional(string)<br>    private_address_only        = optional(bool, true)<br>    block_device_mappings       = optional(map(string), {})<br>    spot_price                  = optional(string, null)<br>    ssm_access                  = optional(bool, false)<br>    type                        = optional(string, "t4g.micro")<br>    use_eip                     = optional(bool, false)<br>    iam_instance_profile        = optional(string)<br>    security_group_ids          = optional(list(string), [])<br>  })</pre> | n/a | yes |
| <a name="input_runner_manager"></a> [runner\_manager](#input\_runner\_manager) | For details check https://docs.gitlab.com/runner/configuration/advanced-configuration.html#the-global-section<br><br>gitlab\_check\_interval = Number of seconds between checking for available jobs (check\_interval)<br>maximum\_concurrent\_jobs = The maximum number of jobs which can be processed by all Runners at the same time (concurrent).<br>prometheus\_listen\_address = Defines an address (<host>:<port>) the Prometheus metrics HTTP server should listen on (listen\_address).<br>sentry\_dsn = Sentry DSN of the project for the Runner Manager to use (uses legacy DSN format) (sentry\_dsn) | <pre>object({<br>    gitlab_check_interval     = optional(number, 3)<br>    maximum_concurrent_jobs   = optional(number, 10)<br>    prometheus_listen_address = optional(string, "")<br>    sentry_dsn                = optional(string, "")<br>  })</pre> | `{}` | no |
| <a name="input_runner_ssm_token_amd64"></a> [runner\_ssm\_token\_amd64](#input\_runner\_ssm\_token\_amd64) | The SSM parameter that stores the authentication token for the Runner (amd64) | <pre>object({<br>    name   = string<br>    arn    = string<br>    region = string<br>  })</pre> | n/a | yes |
| <a name="input_runner_ssm_token_arm64"></a> [runner\_ssm\_token\_arm64](#input\_runner\_ssm\_token\_arm64) | The SSM parameter that stores the authentication token for the Runner (arm64) | <pre>object({<br>    name   = string<br>    arn    = string<br>    region = string<br>  })</pre> | n/a | yes |
| <a name="input_suppressed_tags"></a> [suppressed\_tags](#input\_suppressed\_tags) | List of tag keys which are automatically removed and never added as default tag by the module. | `list(string)` | `[]` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | A map of tags to apply to all resources | `map(string)` | `{}` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_auto_scaling_group_ids"></a> [auto\_scaling\_group\_ids](#output\_auto\_scaling\_group\_ids) | n/a |
| <a name="output_launch_template_ids"></a> [launch\_template\_ids](#output\_launch\_template\_ids) | n/a |
| <a name="output_runner_manager_id"></a> [runner\_manager\_id](#output\_runner\_manager\_id) | n/a |
<!-- END_TF_DOCS -->